DROP TABLE USERLOGIN;
DROP TABLE USERDETAILS;
DROP TABLE ADMINLOGIN;
DROP TABLE PUBLISHER;
DROP TABLE AUTHOR;
DROP TABLE BOOKS;
DROP TABLE RATE;
DROP TABLE CATEGORY;

DROP TABLE BOOK_CAT;
DROP TABLE CATALOGUE;

DROP TABLE RATE;

DROP TABLE BILL;
DROP TABLE TRANSACTION;


CREATE TABLE USERLOGIN
(
USID VARCHAR(40) NOT NULL,
PWD VARCHAR(20),
PRIMARY KEY(USID)
);

CREATE TABLE ADMINLOGIN
(
ADMINID VARCHAR(40) NOT NULL,
PWD VARCHAR(20) ,
PRIMARY KEY(ADMINID)
);

CREATE TABLE PUBLISHER
(
PUBID VARCHAR(40) NOT NULL,
NAME VARCHAR(20),
CITY VARCHAR(20),
PRIMARY KEY(PUBID)
);

CREATE TABLE AUTHOR
(

AUTHORID VARCHAR(40) NOT NULL,
FIRSTNAME VARCHAR(20),
LASTNAME VARCHAR(20),
PRIMARY KEY(AUTHORID)
);

CREATE TABLE BOOKS
(
ISBN VARCHAR(20) NOT NULL ,
TITLE VARCHAR(20),
NO_OF_PAGES INTEGER,
COST_PRICE FLOAT,
EDITION VARCHAR(10),
YEAR INTEGER,
PUBID VARCHAR(40) NOT NULL,
DESCRIPTION VARCHAR(50),
RATING VARCHAR(10),
IMG VARCHAR(20),
PRIMARY KEY(ISBN),
FOREIGN KEY (PUBID) REFERENCES PUBLISHER(PUBID) ON DELETE NO ACTION
);

CREATE TABLE CATEGORY
(
CAT VARCHAR(20) NOT NULL,
NAME VARCHAR(40),
PRIMARY KEY(CAT)
);

CREATE TABLE BOOK_CAT
(
ISBN VARCHAR(40) NOT NULL,
CAT VARCHAR(20) NOT NULL,
PRIMARY KEY(ISBN,CAT),
FOREIGN KEY (ISBN) REFERENCES BOOKS(ISBN) ON DELETE NO ACTION,
FOREIGN KEY (CAT) REFERENCES CATEGORY(CAT) ON DELETE NO ACTION
);

CREATE TABLE CATALOGUE
(ISBN VARCHAR(40) NOT NULL,
ACQUIRED_DATE DATE NOT NULL,
NO_COPIES INTEGER,
PRIMARY KEY(ISBN,ACQUIRED_DATE)
);


CREATE TABLE RATE
(
ISBN VARCHAR(40) NOT NULL,
SP FLOAT NOT NULL,
DISCOUNT FLOAT,
PRIMARY KEY(ISBN),
FOREIGN KEY (ISBN) REFERENCES BOOKS(ISBN) ON DELETE NO ACTION
);


CREATE TABLE USERDETAILS
(
USID VARCHAR(40) NOT NULL,
FNAME VARCHAR(20),
LNAME VARCHAR(20),
MOBILE INTEGER,
EMAIL VARCHAR(20),
ADDRESS VARCHAR(20),
CITY VARCHAR(20),
STATE VARCHAR(20),
COUNTRY VARCHAR(20),
GENDER CHAR(1),
TYPE_OF_USER CHAR(10),
PINCODE INTEGER,
DOJ DATE,
PRIMARY KEY(USID),
FOREIGN KEY (USID) REFERENCES USERLOGIN(USID) ON DELETE CASCADE
);

CREATE TABLE BILL
(
BILLID VARCHAR(10) NOT NULL,
USID VARCHAR(40) NOT NULL,
BILL_DATE DATE,
TOTAL FLOAT,
PRIMARY KEY(BILLID),
FOREIGN KEY(USID) REFERENCES USERLOGIN(USID) ON delete NO ACTION 
);

CREATE TABLE TRANSACTION
(
BILLID VARCHAR(40) NOT NULL,
ISBN VARCHAR(40) NOT NULL,
QUANTITY INTEGER NOT NULL,
PRIMARY KEY(BILLID,ISBN),
FOREIGN KEY (ISBN) REFERENCES BOOKS(ISBN) ON DELETE NO ACTION,
FOREIGN KEY (BILLID) REFERENCES BILL(BILLID) ON DELETE NO ACTION

);


CREATE TABLE WISHLIST
(
USID VARCHAR(40) NOT NULL,
ISBN VARCHAR(40) NOT NULL,
PRIMARY KEY(USID,ISBN),
FOREIGN KEY (ISBN) REFERENCES BOOKS(ISBN) ON DELETE NO ACTION,
FOREIGN KEY (USID) REFERENCES USERLOGIN(USID) ON DELETE NO ACTION

);



INSERT INTO USERLOGIN values('SRI','ABC');
INSERT INTO USERLOGIN values('S','HTTP://@f.com');
SELECT * from USERLOGIN;
SELECT * from USERLOGIN